{% extends "admin/change_list.html" %}
{% load humanize %}

{% block result_list %}
<!-- Resumen Financiero -->
<div class="results"
    style="margin-bottom: 20px; padding: 15px; background: #fff; border-left: 4px solid #79aec8; box-shadow: 0 1px 2px rgba(0,0,0,0.1); border-radius: 4px;">

    <h3 style="margin-top: 0; color: #666; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">
        Resumen Financiero (Filtrado)
    </h3>

    <div style="display: flex; gap: 30px; margin-top: 10px; flex-wrap: wrap;">

        <!-- Asignación Inicial -->
        <div>
            <span style="display: block; font-size: 11px; color: #888;">ASIGNACIÓN INICIAL</span>
            <span style="font-size: 18px; font-weight: bold; color: #333;">
                $ {{ summary.total_inicial|default_if_none:"0"|intcomma }}
            </span>
        </div>

        <!-- Reformas -->
        <div>
            <span style="display: block; font-size: 11px; color: #888;">REFORMAS</span>
            <span
                style="font-size: 18px; font-weight: bold; color: {% if summary.total_reformas < 0 %}#ba2121{% else %}#333{% endif %};">
                $ {{ summary.total_reformas|default_if_none:"0"|intcomma }}
            </span>
        </div>

        <!-- Codificado -->
        <div>
            <span style="display: block; font-size: 11px; color: #888;">CODIFICADO</span>
            <span style="font-size: 18px; font-weight: bold; color: #205067;">
                $ {{ summary.total_codificado|default_if_none:"0"|intcomma }}
            </span>
        </div>

        <!-- Devengado -->
        <div style="border-left: 1px solid #ddd; padding-left: 20px;">
            <span style="display: block; font-size: 11px; color: #888;">DEVENGADO</span>
            <span style="font-size: 18px; font-weight: bold; color: #417690;">
                $ {{ summary.total_devengado|default_if_none:"0"|intcomma }}
            </span>
        </div>

        <!-- Ejecución -->
        <div>
            <span style="display: block; font-size: 11px; color: #888;">% EJECUCIÓN</span>
            <span style="font-size: 18px; font-weight: bold; color: #666;">
                {% widthratio summary.total_devengado|default:0 summary.total_codificado|default:1 100 %}%
            </span>
        </div>

    </div>
</div>

{{ block.super }}
{% endblock %}
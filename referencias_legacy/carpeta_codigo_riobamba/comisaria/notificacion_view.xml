<?xml version="1.0"?>
<openerp>
    <data>

    <menuitem id="menu_comisaria" 
			   
			  name="Comisaria"
/>

      <!-- comisaria vistas
		-->
	<!-- formulario del ingreso de la notificacion
		-->
      <record model="ir.ui.view" id="view_notificacion_form">
		<field name="name">notificacion.form</field>
		<field name="model">notificacion</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
		  <form string="Notificaciones">
			<group col="6" colspan="4">
			  <group col="6" colspan="4">
			  	<newline />	
			  	<field name="name" colspan="2" readonly="1"/> <!-- readonly="1" -->	
				<field name="create_user_id" colspan="2" readonly="1" string="Creado por:"/>
                                <newline />			  	
				<field name="fecha" colspan="2" required="1" attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
                                <field name="fecha2" colspan="2" 
                                 attrs="{'required': [('state', 'in',('Notificacion1'))],'readonly': [('state', 'not in',  
                                 ('Notificacion1'))]}" />
                                <newline />
                                <field name="fecha3" colspan="2" 
                                 attrs="{'required': [('state', 'in',('Notificacion2'))],'readonly': [('state', 'not in',  
                                 ('Notificacion2'))]}" />
                                <field name="fecha_actual" colspan="2" 
                                 attrs="{'required': [('state', 'in',('Notificacion3'))],'readonly': [('state', 'not in',  
                                 ('Notificacion3'))]}" />
			        <!-- readonly="1" -->
                                <newline />
			  	<field name="cliente_id" colspan="2" required="1" on_change="pulsar_cliente()"               
                                       attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
			  	<field name="predio_id" colspan="2"  domain="[('cliente_id','=',cliente_id)]" 
                                       attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
                                <newline />
                                <field name="ordenanza_id" colspan="4" required="1" on_change="pulsar_ordenanza()" attrs="{'readonly':  
                                       [('state', 'not in',('Borrador'))]}"/>
				<field name="multa_id" colspan="4" required="1" domain="[('ordenanza_id','=',ordenanza_id)]" 
                                       attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
			  	<newline />
			  
			  </group>
                          <newline />
                          <newline />
                          
			  <group string="PRIMERA NOTIFICACION" col="2" colspan="2" >
			  	
                                <field name="foto" attrs="{'readonly': [('state', 'not in',('Borrador'))]}" widget='image'  nolabel="1" />
			  </group>

			  <group string="SEGUNDA NOTIFICACION" col="4" colspan="4" >
			  	
				<field name="foto1" attrs="{'readonly': [('state', 'not in',('Notificacion1'))]}"  
                                 widget='image' nolabel="1" />
                                 <newline />
			  </group>
                            <newline />
			  <group string="TERCERA NOTIFICACION - MULTA" col="6" colspan="4" >
			  	
				<field name="foto2" widget='image' attrs="{'readonly': [('state', 'not in',('Notificacion2'))]}"   
                                 nolabel="1" colspan="3"/>
				<field name="foto3" widget='image' attrs="{'readonly': [('state', 'not in',('Notificacion2'))]}" 
                                 nolabel="1" colspan="3"/>
                             <newline />
			  </group>
                             <newline />
			  <group string="Numero Notificaciones" col="6" colspan="3" >
			  	<newline />
			  	<field name="notificacion1"  colspan="2"  readonly="1"/>
			  	<field name="notificacion2"  colspan="2" required="1" readonly="1"/>
			  	<field name="notificacion3"  colspan="2" required="1" readonly="1"/>
			  </group>
			     <newline />
			     <newline />
			  <group  col="6" colspan="4">
			     <field name="direccion" colspan="4" required="1" attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
			     <newline />
			     <field name="observaciones" colspan="4" required="1" 
                                attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>
			     <newline />
			     <field name="empleado_id" colspan="2" 
                                 domain="['|',('department_id','=',3),'|',('id','=',346),('id','=',578)]" required="1" 
                                 attrs="{'readonly': [('state', 'not in',('Borrador'))]}"/>

			     <field name="empleado_id2" colspan="2" 
                                 domain="['|',('department_id','=',3),'|',('id','=',346),('id','=',578)]"
                              attrs="{'required': [('state', 'in',('Notificacion1'))],'readonly': [('state', 'not in',
                              ('Notificacion1'))]}"/>
                             <newline />
                             <field name="empleado_id3" colspan="2" 
                                 domain="['|',('department_id','=',3),'|',('id','=',346),('id','=',578)]"
                              attrs="{'required': [('state', 'in',('Notificacion2'))],'readonly': [('state', 'not in', 
                              ('Notificacion2'))]}"/>

                             <newline /><newline />
                             <field name="supervisor_id" 
                              domain="['|',('department_id','=',3),'|',('id','=',346),('id','=',578)]" colspan="2" required="1"/>
                             <field name="comisario_id" 
                              domain="['|',('department_id','=',3),'|',('id','=',346),('id','=',578)]" colspan="2" required="1"/>
                          </group>

			</group>  
	  		
                        <group colspan="4" col="9">
	    		  <button name="print_notificacion" colspan="1" states="Notificacion1" string="Imprimir Reporte de Notificaciones" 
		    	         type="object" icon="gtk-print"/> <!-- el boton aparece en states = Notificacion1-->

	    		  <button name="print_multa" colspan="1" states="Notificacion3" string="Imprimir Informe de Notificaciones" 
		    	         type="object" icon="gtk-print"/> <!-- de donde son esos iconos-->

			  <button name="print_todas_notificaciones"  states="Solicitado" string="Imprimir Todas" 
		    	         type="object" icon="gtk-print"/> <!-- de donde son esos iconos-->

	    		  <field name="state" readonly="1" widget="statusbar" 
                                 statusbar_visible="Borrador,Notificacion1,Notificacion2,Notificacion3" 
		   		 statusbar_colors='{"auto":"blue", "Notificacion1":"blue"}'/> <!-- ESTOS SON LOS ESTADOS QUE INDICAN-->

	    		  <button name="return_borrador" states="Notificacion1" type="object" string="Regresar a borrador" 
		    		  confirm="Está seguro de regresar a borrador" 
		    		  icon="gtk-execute"/>	<!-- por que este boton esta visible y el otro no -->

	    		  <button name="cambia_notificacion1" states="Borrador"  string="Ejecutar Notificacion1" type="object" 
                           icon="gtk-media-play"/><!-- PASA A NOTIFICACION 1 -->
			  <button name="cambia_notificacion2" states="Notificacion1"  string="Ejecutar Notificacion2" type="object" 
                                  icon="gtk-media-play"/>
			  <newline />
			  <newline />
	    		  <button name="return_notificacion1" colspan="1" states="Notificacion2" type="object" string="Regresar a  
                                  Notificacion 1" confirm="Está seguro de regresar a la primera notificación" 
		    		  icon="gtk-execute"/>	<!-- por que este boton esta visible y el otro no -->

			  <button name="cambia_notificacion3" states="Notificacion2"  string="Ejecutar Notificacion3" type="object" 
                                  icon="gtk-media-play"/>
	  		</group>
		  </form>
		</field>
      </record>
	<!-- formulario de vista de las notificaciones listado
		-->	  
      <record id="view_notificaciones_tree" model="ir.ui.view">
		<field name="name">notificacion.tree</field>
		<field name="model">notificacion</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
		  <tree string="Notificaciones" >
			<field name="name"/>
			<field name="fecha"/>
                        <field name="fecha2"/>
                        <field name="fecha3"/>
			<field name="cliente_id"/>
			<field name="direccion"/>
			<field name="notificacion1"/>
			<field name="notificacion2"/>
			<field name="notificacion3"/>
			<field name="ordenanza_id"/>
			<field name="multa_id"/>
			<field name="empleado_id"/>
                        <field name="empleado_id2"/>
                        <field name="empleado_id3"/>
			<field name="state"/>
                        <field name="predio_id"/>
                        
                        
		  </tree>
		</field>
      </record>

      <record id="view_notificacion_graph" model="ir.ui.view">
         <field name="name">notificacion.graph</field>
         <field name="model">notificacion</field>
         <field name="type">graph</field>
         <field name="arch" type="xml">
             <graph string="Notificaciones Estadistica" type="bar">
                 <field name="state"/>
                 <field name="cantidad" operator="+"/>
                 
             </graph>
         </field>
      </record>

	<!-- formulario de vista para la busqueda de las notificaciones
		-->
      <record id="view_notificacion_filter" model="ir.ui.view">
	<field name="name">Notificacion Busqueda</field>
	<field name="model">notificacion</field>
	<field name="type">search</field>
	<field name="arch" type="xml">
	  <search string="Notificaciones">
	    <field name="name"/>
            <field name="ordenanza_id"/>
	    <field name="multa_id"/>
	    <field name="fecha"/>
            <field name="fecha2"/>
            <field name="fecha3"/>
		<field name="cliente_id"/>
		<field name="direccion"/>
                <field name="predio_id"/>
                <newline />
		<field name="notificacion1"/>
		<field name="notificacion2"/>
		<field name="notificacion3"/>
		
                

	        <newline />
		  <group expand="1" string="Agrupado por..." colspan="4" col="10">
		      <filter string="estado" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                      <filter icon="stock_person" name="empleado" string="Cliente" domain="[]" context="{'group_by':'cliente_id'}"/>
                      <filter string="Policia 1ra Not." icon="terp-partner" domain="[]" context="{'group_by':'empleado_id'}"/>
                      <filter string="Policia 2da Not." icon="terp-partner" domain="[]" context="{'group_by':'empleado_id2'}"/>
                      <filter string="Policia 3ra Not." icon="terp-partner" domain="[]" context="{'group_by':'empleado_id3'}"/>
                         
                         <separator orientation="vertical" />
                      <filter string="Ordenanza" icon="gtk-justify-fill" domain="[]" context="{'group_by':'ordenanza_id'}"/>
                      <filter string="Multa" icon="gtk-edit" domain="[]" context="{'group_by':'multa_id'}"/>
                         <separator orientation="vertical" />
                      <filter string="Fecha 1ra Not." icon="terp-go-month" domain="[]" context="{'group_by':'fecha'}"/>
                      <filter string="Fecha 2da Not." icon="terp-go-month" domain="[]" context="{'group_by':'fecha2'}"/>
                      <filter string="Fecha 3ra Not." icon="terp-go-month" domain="[]" context="{'group_by':'fecha3'}"/>
                      <filter string="Predio" icon="terp-go-home" domain="[]" context="{'group_by':'predio_id'}"/>
	          </group>

	    <newline />
	  </search>
	</field>
      </record>
	<!-- al hacer click se abre el formulario de ingreso de la notificacion
		-->  
      <record id="action_notificacion" model="ir.actions.act_window">
		<field name="name">Notificaciones</field>
		<field name="res_model">notificacion</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,graph</field>
      </record>
	<!-- el menu en la parte izquierda donde aparece la notificacion
		-->   
      <menuitem id="menu_comisaria_notificacion"
				action="action_notificacion"
				parent="menu_comisaria"
				name="Notificaciones" />


    </data>
</openerp>

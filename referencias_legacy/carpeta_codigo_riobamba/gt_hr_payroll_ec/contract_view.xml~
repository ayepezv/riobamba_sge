<?xml version="1.0"?>
<openerp>
    <data>

<!-- PROJECTION LINE
VIEWS: FORM, TREE 
-->
<record model="ir.ui.view" id="view_projection_anual_form">
  <field name="name">hr.anual.projection.form</field>
  <field name="model">hr.anual.projection</field>
  <field name="type">form</field>
  <field name="arch" type="xml">
    <form string="Proyeccion Imp. Renta">
      <field name="name" required="1" select="1"/>
      <field name="fy_id" required="1"/>
      <field name="total" readonly="1"/>
      <newline/>
      <field name="line_ids" nolabel="1" colspan="4"/>
    </form>
  </field>
</record>

<record model="ir.ui.view" id="view_anual_projection_tree_view">
  <field name="name">hr.anual.projection.tree</field>
  <field name="model">hr.anual.projection</field>
  <field name="type">tree</field>
  <field name="arch" type="xml">
    <tree string="Imp. Renta">
      <field name="name"/>
      <field name="total"/>
    </tree>
  </field>
</record>

<record model="ir.ui.view" id="view_anuel_projection_tree">
  <field name="name">hr.anual.rent.tax.view.tree</field>
  <field name="model">hr.anual.rent.tax</field>
  <field name="type">tree</field>
  <field name="arch" type="xml">
    <tree string="Imp. Renta">
      <field name="name"/>
      <field name="fy_id"/>
      <field name="start_computed"/>
      <field name="mensual"/>
      <field name="end_computed"/>
    </tree>
  </field>
</record>

<record model="ir.ui.view" id="view_anual_rent_tax_form">
  <field name="name">hr.anual.rent.tax.form</field>
  <field name="model">hr.anual.rent.tax</field>
  <field name="type">form</field>
  <field name="arch" type="xml">
    <form string="Imp. Renta">
      <field name="name" required="1" select="1"/>
      <field name="fy_id" required="1"/>
      <field name="start_computed"/>
      <field name="mensual"/>
      <field name="end_computed"/>
      <newline/>
      <field name="line_ids" nolabel="1" colspan="4"/>
    </form>
  </field>
</record>

<record model="ir.ui.view" id="view_projection_line_form">
  <field name="name">hr.projection.line.form</field>
  <field name="model">hr.projection.line</field>
  <field name="type">form</field>
  <field name="arch" type="xml">
    <form string="Proyeccion Imp. Renta">
      <field name="projection_id" required="1" select="1" widget="selection"/>
      <field name="value" required="1" sum="TOTAL"/>
    </form>
  </field>
</record>

<record model="ir.ui.view" id="view_projection_line_tree">
  <field name="name">hr.projection.line.view.tree</field>
  <field name="model">hr.projection.line</field>
  <field name="type">tree</field>
  <field name="arch" type="xml">
    <tree string="Proyeccion Imp. Renta">
      <field name="projection_id" select="1" widget="selection"/>
      <field name="value" select="1"/>
    </tree>
  </field>
</record>

<!--
        ================
        contract subtype
        ================
        -->
        
        <record id="action_gt_contract_subtype" model="ir.actions.act_window">
			<field name="name">Tipo de Contrato</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">hr.contract.type.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		
        <record id="view_gt_contract_subtype_form" model="ir.ui.view">
            <field name="name">Tipo de Contrato - Form</field>
            <field name="model">hr.contract.type.type</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Tipo de Contrato">
                	<group colspan="4">
                    	<field name="name" colspan="2" required="1"/>
                    	<field name="type_id" colspan="2" required="1"/>
                    	
                    </group>
                </form>
            </field>
        </record>
        
        <record id="view_gt_contract_subtype_tree" model="ir.ui.view">
            <field name="name">Tipo de Contrato - Tree</field>
            <field name="model">hr.contract.type.type</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tipo de Contrato">
                	<field name="name"/>
                	<field name="type_id"/>
                </tree>
            </field>
        </record>
        
		<menuitem id="menu_contract_subtype" parent="hr_contract.next_id_56" name="Tipo de Contratoo" action="action_gt_contract_subtype"/>

		<!-- contract type -->

<record model="ir.ui.view" id="view_contract_type_vacations">
  <field name="name">hr.contract.type.view.form</field>
  <field name="model">hr.contract.type</field>
  <field name="type">form</field>
  <field name="inherit_id" ref="hr_contract.hr_contract_type_view_form"/>
  <field name="arch" type="xml">
	<xpath expr="/form/field[@name='name']" position="after">
	  <group string="Formulas para vacaciones" colspan="4" col="4">
	    <field name="formula_normales" required="True" colspan="4"/>
	    <field name="formula_adicionales" required="True" colspan="4"/>
	  </group>
    </xpath>
  </field>
</record>
		
		<!-- contract -->

<record model="ir.ui.view" id="view_contract_ir_tree">
  <field name="name">hr.contract.ir</field>
  <field name="model">hr.contract</field>
  <field name="type">tree</field>
  <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
  <field name="arch" type="xml">
	<xpath expr="/tree/field[@name='employee_id']" position="replace">
	  <field name="employee_id" invisible="1"/>
	  <field name="employee_name"/>
	  <field name="wage"/>
    </xpath>
  </field>
</record>

<record model="ir.ui.view" id="view_contract_ir_form_contract">
  <field name="name">hr.contract.ir</field>
  <field name="model">hr.contract</field>
  <field name="type">form</field>
  <field name="inherit_id" ref="hr_payroll.hr_contract_form_inherit"/>
  <field name="arch" type="xml">
	<xpath expr="/form/notebook/page/group/field[@name='schedule_pay']" position="replace"/>
  </field>
</record>

<record model="ir.ui.view" id="view_contract_ir_form">
  <field name="name">hr.contract.ir</field>
  <field name="model">hr.contract</field>
  <field name="type">form</field>
  <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
  <field name="arch" type="xml">
	<field name="name" position="replace"><field name="name" string="#Contrato/Acci贸n Personal"/></field>
	<xpath expr="/form/group/field[@name='type_id']" position="before">
	  <field name="costo_hora"/>
      <!--field name="active"/-->
    </xpath>
    <xpath expr="/form/group/field[@name='job_id']" position="replace">
    	<!--field name="budget_line_id"/-->
    	<field name="department_id" required="1"/>
    	<field name="project_id"/>
	<field name="activity_id"/>
	<field name="job_id" required="1"/>
	<field name="ocupational_id"/>
    </xpath>
    <xpath expr="/form/group/field[@name='type_id']" position="replace">
      <field name="type_id" required="1" string="Tipo de Relaci贸n Laboral"/>
      <field name="subtype_id" required="1" domain="[('type_id','=',type_id)]"/>
    </xpath>
    <field name="notes" position="replace"/>
    <xpath expr="/form/notebook/page/separator[@string='Notes']" position="replace"/>
    <xpath expr="/form/notebook/page/group/field[@name='working_hours']" position="replace">
    	<field name="working_hours" invisible="1"/>
    	<field name="work_id"/>
    	<field name="marc_employee"/>
    </xpath>
    <xpath expr="/form/notebook/page/group[@name='right_column']/separator[@name='advantages']" position="replace">
		<separator name="advantages" colspan="2" string="Advantages" invisible="1"/>
    </xpath>
    <xpath expr="/form/notebook/page/group[@name='right_column']/field[@name='advantages']" position="replace">
	<field name="advantages" nolabel="1" colspan="2" invisible="1"/>
    </xpath>
    <xpath expr="/form/notebook/page/group[@name='right_column']/field[@name='advantages']" position="after">
    	<separator colspan="2" string="Informacion Adicional"/>
    	<field name="fecha_legalizacion"/>
    	<field name="codigo"/>
	<button name="crear_proyecciones" string="Crear proyecciones de contratos activos" type="object"/>
    </xpath>
	<xpath expr="/form/notebook/page[@string='Work Permit']" position="replace"/>
    <notebook position="inside">
	  <page string="Historial">
		<notebook>
		  <page string="Salario">
			<field colspan="4" name="wage_hist_ids" nolabel="1">
				<tree string="Historial">
					<field name="name"/>
					<field name="wage"/>
					<field name="new_wage"/>
				</tree>
				<form>
					<field name="name" colspan="4"/>
					<field name="wage" colspan="2"/>
					<field name="new_wage" colspan="2"/>
				</form>
			</field>
		  </page>
		  <page string="Puestos Trabajo">
			<field colspan="4" name="job_hist_ids" nolabel="1">
				<tree string="Historial">
					<field name="name"/>
					<field name="date_end"/>
					<field name="job_id"/>
					<field name="new_job"/>
				</tree>
				<form>
					<field name="name" colspan="2"/>
					<field name="date_end" colspan="2"/>
					<field name="job_id" colspan="2"/>
					<field name="new_job" colspan="2"/>
				</form>
			</field>
		  </page>
		</notebook>
	  </page>
    </notebook>
  </field>
</record>

<record model="ir.ui.view" id="view_contract_fr_form">
  <field name="name">hr.contract.fr</field>
  <field name="model">hr.contract</field>
  <field name="type">form</field>
  <field name="inherit_id" ref="hr_payroll.hr_contract_form_inherit"/>
  <field name="arch" type="xml">
	<field name="struct_id" position="after">
		<field name="extension_iess"/>
		<field name="tiene_continuidad"/>
		<field name="contrato_anterior" domain="[('employee_id','=',employee_id),('id','!=',id),('date_end','&lt;=',date_start)]" attrs="{'invisible':[('tiene_continuidad','=',False)],'required':[('tiene_continuidad','=',True)]}" on_change="obtener_dias_fr(contrato_anterior)"/>
		<field name="continuidad_desde" readonly="1" attrs="{'invisible':[('tiene_continuidad','=',False)]}"/>
		<field name="fondo_reserva"/>
		<field name="dias_fr"/>
	</field>
  </field>
</record>

<record id="hr_contract_view_search_modified" model="ir.ui.view">
  <field name="name">hr.contract.view.search.modified</field>
  <field name="model">hr.contract</field>
  <field name="inherit_id" ref="hr_contract.hr_contract_view_search"/>
  <field name="arch" type="xml">
    <!--xpath expr="/search/group/filter[@string='Current']" position="before">
      <filter string="Activos" icon="terp-check" name="active" domain="[('active','=',True)]" help="Contratos activos"/>
      <filter string="Inactivos" icon="terp-dialog-close" name="active_false" domain="[('active','=',False)]" help="Contratos inactivos"/>
    </xpath-->
    <xpath expr="/search/group/field[@name='date_end']" position="after">
    	<field name="type_id" string="Tipo de relaci贸n laboral"/>
    	<field name="subtype_id" string="Tipo de contrato"/>
    	<!--filter name="imprimir_pantalla" type="object" string="Empleado" icon="terp-personal" context="{'group_by':'employee_id','context':{'filtro':'aplica'}}"/-->
    	<!--button name="imprimir_pantalla" type="object" string="Imprimir Pantalla"/-->
    </xpath>
    <xpath expr="/search/group[@expand='0']/filter[@string='Contract Type']" position="replace">
    	<filter string="Tipo de relaci贸n laboral" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'type_id'}"/>
    	<filter string="Tipo de contrato" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'subtype_id'}"/>
    </xpath>
  </field>
</record>


<!--record id="hr_contract.action_hr_contract" model="ir.actions.act_window">
  <field name="name">Contracts</field>
  <field name="res_model">hr.contract</field>
  <field name="view_type">form</field>
  <field name="view_mode">tree,form</field>
  <field name="domain">[]</field>
  <-field name="context">{'search_default_active':1}</field->
  <field name="search_view_id" ref="hr_contract.hr_contract_view_search"/>
</record-->

    </data>
</openerp>

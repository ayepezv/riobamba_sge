<?xml version="1.0"?>
<openerp>
    <data>

    <!-- Varios views
    -->
   <report auto="False" id="pago_vario" model="hr.varios"
            name="hr.varios" rml="gt_hr_pago/report/varios.mako"
            usage="default" string="Pagos Varios" header="True" report_type="webkit"/>

    <record model="ir.ui.view" id="view_varios_form">
      <field name="name">hr.varios.form</field>
      <field name="model">hr.varios</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
	<form string="Pago varios">
	  <group col="4" colspan="4">
	    <field name="name" colspan="2"/>
	    <field name="period_id" colspan="2"/>
	  </group>
	  <group col="4" colspan="4">
	    <field name="archivo" colspan="2"/>
	    <button name="load_varios_excel" states="draft" string="Importar Hoja" type="object" icon="gtk-execute"/>
	  </group>
	  <!--button name="load_employee_quincena" states="draft" string="Generar" type="object" icon="gtk-execute" groups="base.group_hr_manager"/>
	  <button name="print_quincena" string="Imprimir" icon="gtk-print" type="object" colspan="2"/-->
	  <field name="line_ids" colspan="4" nolabel="1">
	    <tree string="Detalle" editable="bottom">
	      <field name="name"/>
	      <field name="descontado_id" readonly="1"/>
	      <field name="monto"/>
	      <!--field name="monto_anticipo"/-->
	      <field name="descuento"/>
	      <field name="valor" sum="TOTAL PAGOS $" readonly="1"/>
	    </tree>
	  </field>
	  <group>
	    <field name="state"  widget="statusbar" statusbar_colors='{"draft":"black","pendiente":"blue","pagado":"green"}'/>
	    <button name="pendiente_varios" states="draft" string="Aprobar" type="object" icon="gtk-execute" groups="base.group_hr_manager"/>
	    <button name="a_borrador_varios" states="pendiente" string="Regresar Borrador" type="object" icon="gtk-execute" groups="base.group_hr_manager"/>
	  </group>
	</form>
      </field>
    </record>
    
    <record id="view_varios_tree" model="ir.ui.view">
      <field name="name">hr.varios.tree</field>
      <field name="model">hr.varios</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
	<tree string="Pagos Varios" colors="black:state == 'draft';blue:state == 'pendiente';green:state == 'pagado'">
	  <field name="name"/>
	  <field name="period_id"/>
	  <field name="state"/>
	</tree>
      </field>
    </record>
    
    <record id="view_varios_filter" model="ir.ui.view">
      <field name="name">Varios</field>
      <field name="model">hr.varios</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
	<search string="Periodos">
	  <field name="name"/>
	  <field name="period_id"/>
	</search>
      </field>
    </record>
    
    <record id="action_hr_varios" model="ir.actions.act_window">
      <field name="name">Pagos Varios</field>
      <field name="res_model">hr.varios</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
     </record>

    
    <menuitem id="menu_hr_varios"
	      action="action_hr_varios"
	      parent="hr_payroll.menu_hr_root_payroll"
	      name="Pagos Varios"
	      groups="base.group_hr_manager"/>

    <!-- account move -->
    <record model="ir.ui.view" id="view_account_move_beneficiarios">
      <field name="name">account move beneficiario</field>
      <field name="model">account.move</field>
      <field name="type">form</field>
      <field name="inherit_id" ref="retention.view_move_less_form"/>
      <field name="arch" type="xml">
	<notebook position="inside">
	  <page string="Detalle Beneficiarios">
	    <group string="Importar Hoja Excel" colspan="4">
	      <field name="archivo" colspan="2"/>
	      <button name="loadVariosExcel" string="Importar Hoja" type="object" icon="gtk-execute" colspan="1"
		      confirm="Este proceso genera el detalle y crea un pagos varios que podra ser utilizado para generar el SPI en Tesoreria"/>
	      <button name="creaVarios" string="Generar Pago Tercero" type="object" icon="gtk-execute" colspan="1"/>
	    </group>
	    <group string="Pago Terceros Relacionado"  colspan="4">
	      <field name='varios_id' colspan="4" readonly="1"/>
	      <!--button name="loadVarios" string="Importar Pago Tercero" type="object" icon="gtk-execute" colspan="1"/-->
	    </group>
	    <group string="Detalle Beneficiarios" colspan="4">
	    <field name="beneficiario_ids" colspan="4" nolabel="1">
	      <tree editable='top'>
		<field name='name' required="1"/>
		<field name='valor' required="1" sum="TOTAL"/>
	      </tree>
	    </field>
	    </group>
	  </page>
	</notebook>
      </field>
    </record>

    <record model="ir.ui.view" id="view_account_move_beneficiarios_afectacion">
      <field name="name">account move beneficiario afectacion</field>
      <field name="model">account.move</field>
      <field name="type">form</field>
      <field name="inherit_id" ref="retention.view_move_less_form_afectacion"/>
      <field name="arch" type="xml">
	<notebook position="inside">
	  <page string="Detalle Beneficiarios">
	    <group string="Importar Hoja Excel" colspan="4">
	      <field name="archivo" colspan="2"/>
	      <button name="loadVariosExcel" string="Importar Hoja" type="object" icon="gtk-execute" colspan="1"
		      confirm="Este proceso genera el detalle y crea un pagos varios que podra ser utilizado para generar el SPI en Tesoreria"/>
	      <button name="creaVarios" string="Generar Pago Tercero" type="object" icon="gtk-execute" colspan="1"/>
	    </group>
	    <group string="Pago Terceros Relacionado"  colspan="4">
	      <field name='varios_id' colspan="4" readonly="1"/>
	      <!--button name="loadVarios" string="Importar Pago Tercero" type="object" icon="gtk-execute" colspan="1"/-->
	    </group>
	    <group string="Detalle Beneficiarios" colspan="4">
	    <field name="beneficiario_ids" colspan="4" nolabel="1">
	      <tree editable='top'>
		<field name='name' required="1"/>
		<field name='valor' required="1" sum="TOTAL"/>
	      </tree>
	    </field>
	    </group>
	  </page>
	</notebook>
      </field>
    </record>
    
    </data>
</openerp>

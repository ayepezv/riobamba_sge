<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
	
	<!-- VIATICOS -->
	
	<record id="property_rule_viaticos_solicitud_usuario" model="ir.rule">
        <field name="name">Viaticos - Usuario</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('employee_id.user_id.id', '=', user.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_usuario')])]"/>
    </record>

    <record id="property_rule_viaticos_solicitud_secretaria" model="ir.rule">
        <field name="name">Viaticos - Departamento</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('department_id.id', '=', user.context_department_id.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_secretaria')])]"/>
    </record>
    
    <record id="property_rule_viaticos_solicitud_jefe" model="ir.rule">
        <field name="name">Viaticos - Jefe</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('de_sindicato','!=',True),('jefe_id', '=', user.employee_id.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_jefe')])]"/>
    </record>

    <!--record id="property_rule_viaticos_solicitud_jefe_departamento" model="ir.rule">
        <field name="name">Viaticos - Jefe Departamento</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('employee_id.department_id.parent_id.id', '=', user.context_department_id.id),('employee_id.department_id.parent_id.manager_id.id', '=', user.employee_id.id),('employee_id.department_id.manager_id.id', '=', 'employee_id.id')]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_jefe')])]"/>
    </record-->

    <record id="property_rule_viaticos_solicitud_jefe_sindicato" model="ir.rule">
        <field name="name">Viaticos - Jefe Sindicato</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('de_sindicato', '=', True),('employee_id.department_id', '!=', '')]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_jefesindicato')])]"/>
    </record>

    <record id="property_rule_viaticos_solicitud_secre_sindicato" model="ir.rule">
        <field name="name">Viaticos - Secretaria Sindicato</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('de_sindicato', '=', True),('employee_id.department_id', '!=', '')]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_secresindicato')])]"/>
    </record>
    
    <record id="property_rule_viaticos_solicitud_jefe2" model="ir.rule">
        <field name="name">Viaticos - Coordinador</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <!--field name="domain_force">[('employee_id.department_id.parent_id','=',user.context_department_id.id),('employee_id.department_id.manager_id','=','employee_id.id')]</field-->
        <field name="domain_force">[('employee_id.department_id.coordinador_id.id','=',user.employee_id.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_jefe')])]"/>
    </record>
    
    <record id="property_rule_viaticos_solicitud_prefecto" model="ir.rule">
        <field name="name">Viaticos - Prefecto</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', '!=', ''),('employee_id','!=',''),('jefe_id','=','')]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_prefecto')])]"/>
    </record>
    
    <record id="property_rule_viaticos_solicitud_tthh" model="ir.rule">
        <field name="name">Viaticos - Talento Humano</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', '!=', '')]</field>
        <field name="groups" eval="[(6,0,[ref('base.group_hr_manager')])]"/>
    </record>

    <record id="property_rule_viaticos_solicitud_tthh" model="ir.rule">
        <field name="name">Viaticos - Talento Humano</field>
        <field model="ir.model" name="model_id" ref="model_viaticos_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', '!=', '')]</field>
        <field name="groups" eval="[(6,0,[ref('account.group_account_user')])]"/>
    </record>
    
    
    <!-- SALIDAS AL CAMPO -->
    
    <record id="property_rule_salidas_solicitud_usuario" model="ir.rule">
        <field name="name">Salidas al campo - Usuario</field>
        <field model="ir.model" name="model_id" ref="model_salidas_solicitud"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_usuario')])]"/>
    </record>
    
    <record id="property_rule_salidas_solicitud_secretaria" model="ir.rule">
        <field name="name">Salidas al campo - Secretaria</field>
        <field model="ir.model" name="model_id" ref="model_salidas_solicitud"/>
        <field name="domain_force">['|', ('employee_id.user_id', '=', user.id), ('employee_id.department_id', '=', user.context_department_id.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_secretaria'), ref('gt_doc_viaticos.group_via_jefe')])]"/>
    </record>
    
    <record id="property_rule_salidas_solicitud_jefe" model="ir.rule">
        <field name="name">Salidas al campo - Jefe</field>
        <field model="ir.model" name="model_id" ref="model_salidas_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', '=', user.context_department_id.id),('employee_id.department_id.manager_id.user_id','!=',user.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_secretaria'), ref('gt_doc_viaticos.group_via_jefe')])]"/>
    </record>
    
    <record id="property_rule_salidas_solicitud_coordinador" model="ir.rule">
        <field name="name">Salidas al campo - Coordinador</field>
        <field model="ir.model" name="model_id" ref="model_salidas_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', 'child_of', user.context_department_id.id),('employee_id.department_id.manager_id.user_id','!=',user.id)]</field>
        <field name="groups" eval="[(6,0,[ref('gt_doc_viaticos.group_via_coordinador')])]"/>
    </record>
    
    <record id="property_rule_salidas_solicitud_tthh" model="ir.rule">
        <field name="name">Salidas al campo - Talento Humano</field>
        <field model="ir.model" name="model_id" ref="model_salidas_solicitud"/>
        <field name="domain_force">[('employee_id.department_id', '!=', '')]</field>
        <field name="groups" eval="[(6,0,[ref('base.group_hr_manager')])]"/>
    </record>

</data>
</openerp>

<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
      <!-- REFORMA PROGRAMA -->
      <record id="view_reforma_programa" model="ir.ui.view">
        <field name="name">Reformas Programa</field>
        <field name="model">reform.programa</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
          <form string="Reformas programas">
	    <group col="4" colspan="4">
	      <field name="tipo" colspan="2" required="1"/>
	      <field name="fy_id" colspan="2" required="1"/>
	      <field name="date_start" colspan="2" required="1"/>
	      <field name="date" colspan="2" required="1"/>
	    </group>
	    <newline/>
	    <group col="4" colspan="4">
	      <separator string="Reforma Gasto" colspan="2" />
	      <separator string="Reforma Ingreso" colspan="2"/>
	      <newline/>
	      <field name="reforma_ids" colspan="2" nolabel="1"
		     attrs="{'invisible': [('tipo', '!=','Reforma')],'required': [('tipo', '=','Reforma')]}">
		<tree>
		  <field name="name"/>
		  <field name="date"/>
		</tree>
	      </field>
	      <field name="reforma_ing_ids" colspan="2" nolabel="1"
		     attrs="{'invisible': [('tipo', '!=','Reforma')],'required': [('tipo', '=','Reforma')]}">
		<tree>
		  <field name="name"/>
		  <field name="date"/>
		</tree>
	      </field>
	    </group>
	    <newline/>
	    <group col="4" colspan="4">
	      <separator string="Programas" colspan="4"/>
	      <newline/>
	      <field name="program_ids" colspan="4" nolabel="1"
		     attrs="{'invisible': [('tipo', '!=','Programa')]}">
		<tree>
		  <field name="sequence"/>
		  <field name="name"/>
		</tree>
	      </field>
	      <notebook colspan="4">
		<page string="Detalle">
		  <field name='line_ids' nolabel="1">
		    <tree>
		      <field name="program_id"/>
		      <field name="budget_id"/>
		      <field name='inicial'/>
		      <field name="reform"/>
		      <field name='total'/>
		    </tree>
		  </field>
		</page>
	      </notebook>
	      <group col="3" colspan="1">
		<button icon="gtk-cancel" special="cancel"
	        	string="Salir" />
		<button name="computeReformReport" type="object" icon="gtk-execute"  string="Generar"/>
		<button name="printReformaPrograma" type="object" icon="gtk-execute"  string="Imprimir"/>
	      </group>
	    </group>
          </form>
        </field>
      </record>


      <record id="action_reform_programa" model="ir.actions.act_window">
        <field name="name">Reforma por Programa</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">reform.programa</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
      </record>
      
      <menuitem id="menu_reform_programa"
		icon="STOCK_EXECUTE"
		action="action_reform_programa"
		parent="gt_budget.menu_budget_management"
		name="Reforma por programa"
		sequence="14"/>

</data>
</openerp>
